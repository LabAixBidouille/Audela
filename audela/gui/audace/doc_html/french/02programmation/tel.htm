<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head>





<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /><title>Fonctions de pilotage de télescopes</title></head><body>
<p class="date">Date de mise à jour : 28 mai 2011</p>
<h1>Fonctions de pilotage de télescopes </h1>
<p> Ces commandes permettent de contrôler des télescopes reconnus par
AudeLA : LX200. Les commandes qui permettent de contrôler un télescope,
s'écrivent "tel" suivi d'un numéro. Ces commandes n'existent pas au
démarrage de AudeLA, mais sont crées par la commande "::tel::create
...". Ainsi il est possible de piloter plusieurs télescopes, mais il
est laissé à l'utilisateur le soin de ne pas exécuter des commandes
simultanément. Il est important de savoir que les auteurs ne disposent
pas personnellement de ces télescopes, et donc qu'il peut y avoir des
problèmes avec certaines caméras. </p>
<p> Les commandes sont divisées en deux catégories : </p>
<p> Les commandes communes : sont utilisables par tous les télescopes supportées. </p>
<p> Les commandes spécifiques : propres à chaque télescope en fonction de fonctionnalités propres. </p>
<h1> 1. Commandes communes</h1>
<h2> 1.1. Commandes d'informations générales</h2>
<h3> <a name="drivername" id="drivername">tel1 drivername</a></h3>
<p>Retourne le nom de la librairie et la date de la dernière compilation.</p>
<h3> <a name="name" id="name">tel1 name</a></h3>
<p>Retourne le nom du type de télescope associé au driver.</p>
<h3> <a name="protocol" id="protocol">tel1 protocol</a></h3>
<p>Retourne le nom du protocole utilisé.</p>
<h3> <a name="port" id="port">tel1 port</a></h3>
<p>Retourne le nom du port de communication (COM1, etc.).</p>
<h3> <a name="channel" id="channel">tel1 channel</a></h3>
<p>Retourne le nom de "channel Tcl" associé au port de communication
ouvert par l'interpréteur Tcl. En effet, les communications par le port
série sont programmées dans le driver via l'interpréteur Tcl afin de
pouvoir communiquer, hors driver, avec l'instrument (fonction puts et
read de Tcl). </p>
<p>Par exemple, dans cet exemple, on envoie la chaîne #:L# dans le port de communication et on recueille 4 caractères en retour :</p>
<p><code>set c [tel1 channel]</code> <br />

  <code>puts $c "#:L#</code> <br />

  <code>set result [read $c 4]</code> </p>
<h3> <a name="foclen" id="foclen">tel1 foclen ?foclen?</a></h3>
<p>Retourne ou assigne longueur focale (mètres) de l'optique.</p>
<h3> <a name="testcom" id="testcom">tel1 testcom</a></h3>
<p>Teste si la communication est correcte (1) ou incorrecte (0).</p>
<h3> <a name="model" id="model">tel1 model ?function_cat2tel function_tel2cat?</a></h3>
<p>Modèle de pointage. Assigne le nom des fonctions Tcl qui permet de
transformer les coordonnées catalogue (cat) en coordonnées télescope
(tel) et son contraire. Il faut évidemment avoir défini ces fonctions
précédemment. Le modèle de pointage s'applique alors automatiquement
lors du pointage (tel1 radec goto qui utilise function_cat2tel} et lors
de la lecture des coordonnées (tel1 radec coord qui utilise
function_tel2cat).</p>
<h2> 1.2. Commandes de mouvements</h2>
Ces commandes affectent les moteurs de l'axe horaire (RA), de
déclinaison (DEC), de focalisation (éventuel). Les commandes affectées
aux moteurs RA,DEC se nomment tel1 radec et les commandes associées au
moteur de focalisation se nomment tel1 focus. Les arguments suivants
permettent de préciser la nature du mouvement. Tout est résumé dans le
tableau ci-dessous :<br />

    <br />

    retourne l'état des moteurs (unknown, tracking, pointing)<br />

    <table border="2" cellpadding="5">
  <tbody><tr>
    <td><br />
</td>
    <td> motor </td>
    <td> init </td>
    <td> coord </td>
    <td> goto </td>
    <td> move </td>
    <td> stop </td>
    <td> state </td>
  </tr>
  <tr>
    <td><a name="radec" id="radec">tel1 radec </a></td>
    <td> ?on|off? marche/arrêt du suivi sidéral </td>
    <td> {ra dec} <br />
      Initialise les codeurs <br />
      sur des coordonnées </td>
    <td> pas d'arguments <br />
      Retourne la valeur actuelle <br />
      des codeurs </td>
    <td> {ra dec}<br />
      ?-rate value?<br />
      ?-blocking boolean? <br />
      Rallie à la position <br />
      indiquée.<br />
L'option -rate fixe la vitesse (entre 0 et 1). L'option -blocking
précise s'il faut attendre la fin du pointage (=1 défaut) ou non (=0)
pour terminer la commande.<br />
    </td>
    <td> n|s|e|w ?rate? <br />
      Bouge le télescope <br />
      dans une direction. <br />
      Rate est un nombre <br />
      qui varie entre 0 (vitesse <br />
      la plus petite) à 1 (vitesse la plus grande). </td>
    <td> ?n|s|e|w? <br />
      Arrête le mouvement <br />
      spécifié du télescope </td>
    <td align="center">pas d'arguments.<br />
      <br />
      retourne l'état des moteurs (unknown, tracking, pointing)<br />
    </td>
  </tr>
  <tr>
    <td><a name="focus" id="focus">tel1 focus</a></td>
    <td> ?on|off? <br />
      Marche/arrêt du moteur </td>
    <td> value <br />
      Initialise le codeur <br />
      sur la valeur </td>
    <td> pas d'arguments <br />
      Retourne la valeur actuelle <br />
      du codeur </td>
    <td> value<br />
      ?-rate value?<br />
      ?-blocking boolean? <br />
      Rallie à la position <br />
indiquée. L'option -rate fixe la vitesse (entre 0 et 1). L'option
-blocking précise s'il faut attendre la fin du pointage (=1 défaut) ou
non (=0) pour terminer la commande.<br />
    </td>
    <td> +|- ?rate? <br />
      Bouge la focalisation dans <br />
      le sens indiqué. <br />
      Rate, cf. ci dessus. </td>
    <td> ?-|+? <br />
      Arrête le mouvement <br />
      de focalisation </td>
    <td><br />
</td>
    
  </tr>
</tbody></table>
<p>Par exemple, pour rallier le télescope aux coordonnées 4h56m et -7d32m, on écrira : </p>
<p><code>tel1 radec goto {4h56m -7d32m}</code> </p>
<p>Les fonctions de type tel1 radec peuvent parfois se rencontrer sous leur forme obsolète : </p>
<h3> <a name="coord" id="coord">tel1 coord</a></h3>
<p>Retourne les coordonnées en ascension droite et en déclinaison du
télescope ou des codeurs, à condition qu'il soit initialisé, sous la
forme d'une liste à deux éléments. Par exemple : {14h2m32s +12d42m7s}</p>
<h3> <a name="match" id="match">tel1 match <em>coord</em></a></h3>
<p>Resynchronise les coordonnées du télescope sur celles passées à la
commande sous forme d'une liste à deux éléments : [list 14h2m32s
+12d42m7s] par exemple.</p>
<h3> <a name="goto" id="goto">tel1 goto <em>coord</em></a></h3>
<p>Déplace le télescope aux coordonnées passées en paramètres (liste formée de l'ascension droite et de la déclinaison).</p>
<h3> <a name="move" id="move">tel1 move <em>direction</em></a></h3>
<p>Déplace le télescope dans la direction donnée, à choisir entre <em>n</em>, <em>s</em>, <em>e</em> ou <em>w</em>.</p>
<h3> <a name="stop" id="stop">tel1 stop <em>direction</em></a></h3>
<p>Arrête le déplacement dans la direction donnée (<em>n</em>, <em>s</em>, <em>e</em> ou <em>w)</em>.</p>
<h3> <a name="speed" id="speed">tel1 speed <em>vitesse</em></a></h3>
<p>Initialise la vitesse de déplacement du télescope, à choisir entre <em>slew</em>, <em>find</em>, <em>center</em> ou <em>guide</em>.</p>
De même, les fonctions de type tel1 focus, peuvent parfois se rencontrer sous leur forme obsolète :

<h3> <a name="focus" id="focus">tel1 focus <em>param</em></a></h3>
<p>Actionne le moteur de focalisation du télescope, en fonction du paramètre <em>param</em> : </p>
<p><em>slow</em> : Vitesse lente. </p>
<p><em>fast</em> : Vitesse rapide. </p>
<p><em>in</em> : Déplacement du moteur dans un sens. </p>
<p><em>out</em> : Déplacement dans l'autre sens. </p>
<p><em>stop</em> : Arrêt du moteur de focalisation.</p>
<p> La commande <em>in</em> ou <em>out</em> active les moteurs, il faut bien entendu l'arrêter par la commande <em>stop</em> avant que des dégâts ne soient commis...<br />

 </p>
<h2> 2. Commandes spécifique LX200</h2>
<h3> 2.1. Commandes du driver externe (liblx200.dll) :</h3>
<h3> <a name="date" id="date">tel1 date ?Date?</a></h3>
<p>Mise à jour de l'horloge du microcontrôleur du télescope.</p>
<h3> <a name="home" id="home">tel1 home ?Home?</a></h3>
<p>Mise à jour de l'observatoire du microcontrôleur du télescope.</p>
<h3> <a name="longformat" id="longformat">tel1 longformat ?on|off?</a></h3>
<p>Choix du format de coordonnées.</p>
<h3> <a name="tempo" id="tempo">tel1 tempo ?ms?</a></h3>
<p>Fixe le délais de temporisation (millisecondes) entre une entrée/sortie.</p></body></html>